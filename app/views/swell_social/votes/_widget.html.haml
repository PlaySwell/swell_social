
%span{ style: args[:css_style], id: args[:css_id] || 'vote_widget' }
	- if vote = SwellSocial::Vote.where( user_id: current_user.try( :id ), parent_obj_id: parent_obj.id, parent_obj_type: parent_obj.class.name ).last
		-# this user has voted on this
		
		- if vote.up?
			= link_to swell_social.vote_path( vote ), method: :delete, class: 'tool-tip vote-widget upvote' do
				%i{ class: args[:context] == 'vote' ? 'fa fa-arrow-circle-up' : 'fa fa-thumbs-up' }
			%span.upvote.val
				= vote_count( parent_obj.cached_upvote_count )
			
			= link_to swell_social.vote_path( vote ), method: :patch, class: 'vote-widget downvote' do
				%i{ class: args[:context] == 'vote' ? 'fa fa-arrow-circle-o-down' : 'fa fa-thumbs-o-down' }

			%span.downvote.val
				= vote_count( parent_obj.cached_downvote_count )

		
		- else
			= link_to swell_social.vote_path( vote ), method: :patch, class: 'vote-widget upvote' do
				%i{ class: args[:context] == 'vote' ? 'fa fa-arrow-circle-o-up' : 'fa fa-thumbs-o-up' }
			%span.upvote.val
				= vote_count( parent_obj.cached_upvote_count )

			= link_to swell_social.vote_path( vote ), title: 'Disliked', method: :delete, class: 'tool-tip vote-widget downvote' do
				%i{ class: args[:context] == 'vote' ? 'fa fa-arrow-circle-down' : 'fa fa-thumbs-down' }
			
			%span.downvote.val
				= vote_count( parent_obj.cached_downvote_count )

	- else
		-# No vote for this yet
		= link_to swell_social.votes_path( parent_obj_type: parent_obj.class.name, parent_obj_id: parent_obj.id, val: 1, context: ( args[:context] || 'like' ) ), method: :post, class: 'vote-widget upvote' do
			%i{ class: args[:context] == 'vote' ? 'fa fa-arrow-circle-o-up' : 'fa fa-thumbs-o-up' }

		%span.upvote.val
			= vote_count( parent_obj.cached_upvote_count )
			
		= link_to swell_social.votes_path( parent_obj_type: parent_obj.class.name, parent_obj_id: parent_obj.id, val: -1, context: ( args[:context] || 'like' ) ), method: :post, class: 'vote-widget downvote' do
			%i{ class: args[:context] == 'vote' ? 'fa fa-arrow-circle-o-down' : 'fa fa-thumbs-o-down' }

		%span.downvote.val
			= vote_count( parent_obj.cached_downvote_count )

